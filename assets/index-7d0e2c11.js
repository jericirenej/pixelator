import{i as h,c as p,a as f,b as v,I as ue,t as w,d as Ke,e as R,f as Ve,u as Ge,g as A,s as M,M as Z,S as Qe,o as te,h as pe,j as ee,k as V,l as _e,P as de,m as ve,n as Y,p as ie,q as Je,D as _t,F as Ze,r as dt,v as ut}from"./vendor-d4398002.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const pt="_header_1qb88_1",vt="_options_1qb88_7",gt="_base-container_1qb88_13",ht="_base-container__upload-area_1qb88_20",ae={header:pt,options:vt,"base-container":"_base-container_1qb88_13",baseContainer:gt,"base-container__upload-area":"_base-container__upload-area_1qb88_20",baseContainer__uploadArea:ht},Le=2**10,mt=[[Le**2,"MB"],[Le,"KB"]],ft="https://github.com/jericirenej/pixelator",G={theme:"pixelatorTheme",save:"pixelatorState"},$t=(e,n="en-US",t=2)=>{let o="B",r=e;for(const[s,a]of mt){const c=e/s;if(!(c<1)&&(r=c,o=a,c>=1))break}return`${new Intl.NumberFormat(n,{minimumFractionDigits:0,maximumFractionDigits:t}).format(r)} ${o}`},et=2*2**20,tt={desktop:{defaultWidth:50,maximumHeight:75},mobile:{defaultWidth:75,maximumHeight:75}},Q={MAIN_TITLE:{title:"Pixelator",subtitleSegments:["Upload","Pixelate","Repeat"]},UPLOAD_PLACEHOLDER:`Upload picture (max. ${$t(et)})`,PICTURE_ACTIONS:{clearPicture:"Clear Picture",resetCrop:"Reset Crop",pixelate:"Pixelate",download:"Download Image",back:"Go Back",reset:"Reset"},ERRORS:{size:"Size limit exceeded!",fileType:"Please supply an image file!"},PIXELATION_RANGE:{title:"Pixelation",rangeSetterLabel:"px",rangeOptionLabel:"Interval"},THEME_PICKER:{title:"Pick color theme",close:"Close theme picker",saveSettings:"Save",saveTitle:"Save to local storage"}},wt={duration:.4,initialDelay:1,delayFactor:2},[F,ge,he,me,fe,Se,Te]=["corner","top","bottom","left","right","vertical","horizontal"],bt=new Map([["T",[F,ge,Se]],["B",[F,he,Se]],["R",[F,fe,Te]],["L",[F,me,Te]],["TL",[F,ge,me]],["TR",[F,ge,fe]],["BL",[F,he,me]],["BR",[F,he,fe]]]),[Ce,re,xe,ke]=[[0,0],[0,1],[1,0],[1,1]],Ct=[Ce,re,re,Ce,xe,ke,re,re,ke,xe],xt={moveActive:{mouse:"mousemove",touch:"touchmove"},moveEnd:{mouse:"mouseup",touch:"touchend"}},kt="_container_1unh0_1",yt="_heading_1unh0_7",Et="_subheading_1unh0_17",It="_subheading__word_1unh0_24",Lt="_slideIn_1unh0_1",ce={container:kt,heading:yt,subheading:Et,subheading__word:It,slideIn:Lt},St=w("<div><h1></h1><h2></h2></div>"),Tt=w("<span>.</span>"),Dt=()=>{const{title:e,subtitleSegments:n}=Q.MAIN_TITLE,{delayFactor:t,duration:o,initialDelay:r}=wt,i=s=>s===0?r:r+s*t*o;return(()=>{const s=St.cloneNode(!0),a=s.firstChild,c=a.nextSibling;return h(a,e),h(c,p(ue,{each:n,children:(l,d)=>(()=>{const u=Tt.cloneNode(!0),_=u.firstChild;return u.style.setProperty("animation-duration",o+"s"),h(u,l,_),f(g=>{const C=`${i(d)}s`,b=ce.subheading__word;return C!==g._v$4&&u.style.setProperty("animation-delay",g._v$4=C),b!==g._v$5&&v(u,g._v$5=b),g},{_v$4:void 0,_v$5:void 0}),u})()})),f(l=>{const d=ce.container,u=ce.heading,_=ce.subheading;return d!==l._v$&&v(s,l._v$=d),u!==l._v$2&&v(a,l._v$2=u),_!==l._v$3&&v(c,l._v$3=_),l},{_v$:void 0,_v$2:void 0,_v$3:void 0}),s})()},Nt={name:"dark",theme:{"--main-color":"hsl(0deg, 0%, 5%)","--secondary-color":"hsl(0deg, 0%, 85%)","--background-gradient":"linear-gradient(305deg, hsl(0deg,0%,10%) 0%, hsl(0deg,0%,5%) 100%)","--active-color":"hsl(52, 100%, 45%)"}},Rt={name:"gray",theme:{"--main-color":"hsl(0deg, 0%, 92%)","--secondary-color":"hsl(0deg, 0%, 5%)","--background-gradient":"linear-gradient(305deg, hsl(0deg,0%,92%) 0%, hsl(0deg, 1%, 75%) 100%)","--active-color":"hsl(346deg, 88%, 37%)"}},Pt={name:"blue",theme:{"--main-color":"hsl(219deg, 66%, 45%)","--secondary-color":"hsl(0deg, 0%, 90%)","--background-gradient":"linear-gradient(305deg, hsl(219deg,66%,48%) 0%, hsl(219deg, 56%, 38%) 100%)","--active-color":"hsl(112deg, 80%, 56%)"}},Wt={name:"white",theme:{"--main-color":"hsl(0deg, 0%, 98%)","--secondary-color":"hsl(0deg, 0%, 0%)","--background-gradient":"linear-gradient(305deg, hsl(0deg, 0%, 100%) 0%, hsl(0deg, 0%, 95%) 100%)","--active-color":"hsl(72deg, 69%, 35%)"}},Mt={name:"red",theme:{"--main-color":"hsl(0deg, 96%, 32%)","--secondary-color":"hsl(0deg, 0%, 90%)","--background-gradient":"linear-gradient(305deg, hsl(0deg, 96%, 38%) 0%, hsl(0deg, 96%, 28%) 100%)","--active-color":"hsl(194deg, 67%, 49%)"}},nt=[Nt,Wt,Rt,Mt,Pt].reduce((e,n)=>(e[n.name]=n,e),{}),De={val:1,step:1},Ht=(e,n)=>e===n,At=()=>{const[e,n]=R(),[t,o]=R(),[r,i]=R(),[s,a]=Ve(De),c={upload:n,crop:o,pixelated:i,setPixelation:a};return{data:{uploadDataUrl:e,croppedDataUrl:t,pixelatedDataUrl:r,pixelationConfig:s},setContextData(l,d){return Ht(l,"setPixelation"),c[l](d)},clearContextData(l){if(l)return c[l](void 0);i(void 0),n(void 0),a(De)}}},ye=Ke(At()),Ut=()=>{const e=nt,n="dark",[t,o]=R(n),[r,i]=R(!1),s=u=>{u?localStorage.setItem(G.save,"true"):[G.theme,G.save].forEach(_=>localStorage.removeItem(_)),i(u)},a=u=>{const _=document.head.querySelector("[name='theme-color']");_.content=u["--main-color"]},c=()=>{const u=e[t()].theme,_=r();Object.entries(u).forEach(([g,C])=>document.body.style.setProperty(g,C)),a(u),_&&localStorage.getItem(G.theme)!==t()&&localStorage.setItem(G.theme,t())};return{theme:t,setSaveToStorage:i,initializeTheme:()=>{const u=!!localStorage.getItem(G.save);if(i(u),u){const _=localStorage.getItem(G.theme);_&&_!==t()&&o(_)}c()},implementChosenTheme:c,toggleSavePermission:s,setCurrentTheme:u=>{o(u),c()},saveToStorage:r}},Ee=Ke(Ut()),Ot=e=>p(Ee.Provider,{get value(){return Ee.defaultValue},get children(){return p(ye.Provider,{get value(){return ye.defaultValue},get children(){return e.children}})}}),ne=()=>Ge(ye),ot=()=>Ge(Ee),qt=w('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>'),se=e=>{const n=t=>e.onClick&&e.onClick();return(()=>{const t=qt.cloneNode(!0);return t.$$click=n,f(()=>M(t,"class",e.class)),t})()};A(["click"]);const jt=w('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"></path></svg>'),zt=e=>{const n=()=>e.onClick&&e.onClick();return(()=>{const t=jt.cloneNode(!0);return t.$$click=n,f(()=>M(t,"class",e.class)),t})()};A(["click"]);const Bt=w('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"></path></svg>'),rt=e=>{const n=()=>e.onClick&&e.onClick();return(()=>{const t=Bt.cloneNode(!0);return t.$$click=n,f(()=>M(t,"class",e.class)),t})()};A(["click"]);const Xt=w('<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M6.75 2.25v12.75a2.25 2.25 0 002.25 2.25h12.75"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M17.25 14.25V9a2.25 2.25 0 00-2.25-2.25H9.75M17.25 17.25v4.5M6.75 6.75H2.25"></path></svg>'),it=e=>{const n=()=>e.onClick&&e.onClick();return(()=>{const t=Xt.cloneNode(!0);return t.$$click=n,f(()=>M(t,"class",e.class)),t})()};A(["click"]);const Yt=w('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg>'),st=e=>{const n=()=>e.onClick&&e.onClick();return(()=>{const t=Yt.cloneNode(!0);return t.$$click=n,f(()=>M(t,"class",e.class)),t})()};A(["click"]);const Ft=w('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"></path></svg>'),at=e=>{const n=()=>e.onClick&&e.onClick();return(()=>{const t=Ft.cloneNode(!0);return t.$$click=n,f(()=>M(t,"class",e.class)),t})()};A(["click"]);const Kt="_wrapper_mq8wn_1",Vt="_initial_mq8wn_5",Gt="_info-list_mq8wn_12",Qt="_info-list__item_mq8wn_15",Jt="_info-list__hint_mq8wn_34",O={wrapper:Kt,initial:Vt,"info-list":"_info-list_mq8wn_12",infoList:Gt,"info-list__item":"_info-list__item_mq8wn_15",infoList__item:Qt,"info-list__hint":"_info-list__hint_mq8wn_34",infoList__hint:Jt},Zt=w("<article><p><b>Start</b> by uploading a picture. Click the placeholder or drag a file onto it.</p><p>The help section will be updated at each step to guide you through.</p><p>Check back after uploading an image for more info!</p></article>"),Ne=w("<ul><li><span></span></li><li><span></span></li><li><span></span></li></ul>"),en=w("<div><span>Hint: While cropping, hold <b><pre>shift</pre></b> to preserve aspect ratio.</span></div>"),tn=w("<div></div>"),{clearPicture:nn,pixelate:on,resetCrop:rn,reset:sn,download:an,back:cn}=Q.PICTURE_ACTIONS,ln=e=>(()=>{const n=tn.cloneNode(!0);return h(n,p(Qe,{get children(){return[p(Z,{get when(){return e.step==="initial"},get children(){const t=Zt.cloneNode(!0);return f(()=>v(t,O.initial)),t}}),p(Z,{get when(){return e.step==="upload"},get children(){return[(()=>{const t=Ne.cloneNode(!0),o=t.firstChild,r=o.firstChild,i=o.nextSibling,s=i.firstChild,a=i.nextSibling,c=a.firstChild;return h(o,p(se,{}),r),h(r,nn),h(i,p(it,{}),s),h(s,rn),h(a,p(rt,{}),c),h(c,on),f(l=>{const d=O.infoList,u=O.infoList__item,_=O.infoList__item,g=O.infoList__item;return d!==l._v$&&v(t,l._v$=d),u!==l._v$2&&v(o,l._v$2=u),_!==l._v$3&&v(i,l._v$3=_),g!==l._v$4&&v(a,l._v$4=g),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})(),(()=>{const t=en.cloneNode(!0);return f(()=>v(t,O.infoList__hint)),t})()]}}),p(Z,{get when(){return e.step==="pixelated"},get children(){const t=Ne.cloneNode(!0),o=t.firstChild,r=o.firstChild,i=o.nextSibling,s=i.firstChild,a=i.nextSibling,c=a.firstChild;return h(o,p(at,{}),r),h(r,cn),h(i,p(se,{}),s),h(s,sn),h(a,p(st,{}),c),h(c,an),f(l=>{const d=O.infulist,u=O.infoList__item,_=O.infoList__item,g=O.infoList__item;return d!==l._v$5&&v(t,l._v$5=d),u!==l._v$6&&v(o,l._v$6=u),_!==l._v$7&&v(i,l._v$7=_),g!==l._v$8&&v(a,l._v$8=g),l},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),t}})]}})),f(()=>v(n,O.wrapper)),n})(),_n="_wrapper_1q7lg_1",dn="_info-icon_1q7lg_5",un="_info-icon__text_1q7lg_12",pn="_info-icon__icon_1q7lg_17",vn="_info-wrapper_1q7lg_24",gn="_info-wrapper__close_1q7lg_35",hn="_info-section_1q7lg_47",mn="_footer_1q7lg_52",fn="_footer__closeIcon_1q7lg_60",B={wrapper:_n,"info-icon":"_info-icon_1q7lg_5",infoIcon:dn,"info-icon__text":"_info-icon__text_1q7lg_12",infoIcon__text:un,"info-icon__icon":"_info-icon__icon_1q7lg_17",infoIcon__icon:pn,"info-wrapper":"_info-wrapper_1q7lg_24",infoWrapper:vn,"info-wrapper__close":"_info-wrapper__close_1q7lg_35",infoWrapper__close:gn,"info-section":"_info-section_1q7lg_47",infoSection:hn,footer:mn,footer__closeIcon:fn},$n=w("<div><p>Help</p></div>"),wn=w("<h2>Pixelator Info</h2>"),bn=w("<section></section>"),Cn=w('<div><small>Made with <a href="https://www.solidjs.com/" target="_blank">SolidJS</a></small></div>'),xn=w("<div></div>"),kn=()=>{const{data:{uploadDataUrl:e,pixelatedDataUrl:n}}=ne(),[t,o]=R(!1),[r,i]=R("initial");let s;const a=c=>{c.composedPath().includes(s)||o(!1)};return te(()=>{window.addEventListener("click",a),pe(()=>window.removeEventListener("click",a))}),ee(()=>{if(n())return i("pixelated");if(e())return i("upload");i("initial")}),(()=>{const c=xn.cloneNode(!0),l=s;return typeof l=="function"?ve(l,c):s=c,h(c,p(de,{get children(){return p(V,{get when(){return!t()},get children(){return p(_e.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.3}},exit:{opacity:0,transition:{delay:0}},transition:{duration:.3},get children(){const d=$n.cloneNode(!0),u=d.firstChild;return d.$$click=()=>o(!0),h(d,p(zt,{get class(){return B.infoIcon__icon}}),null),f(_=>{const g=B.infoIcon,C=B.infoIcon__text;return g!==_._v$&&v(d,_._v$=g),C!==_._v$2&&v(u,_._v$2=C),_},{_v$:void 0,_v$2:void 0}),d}})}})}}),null),h(c,p(de,{get children(){return p(V,{get when(){return t()},get children(){return p(_e.div,{get class(){return B.infoWrapper},initial:{width:0,opacity:0,height:"275px"},animate:{opacity:1,width:"275px",transition:{delay:.3}},exit:{width:0,opacity:0,transition:{delay:0}},transition:{duration:.3},get children(){return[wn.cloneNode(!0),(()=>{const d=bn.cloneNode(!0);return h(d,p(ln,{get step(){return r()}})),f(()=>v(d,B.infoSection)),d})(),(()=>{const d=Cn.cloneNode(!0),u=d.firstChild;return h(d,p(se,{get class(){return B.footer__closeIcon},onClick:()=>o(!1)}),null),f(_=>{const g=B.footer,C=B.footer__text;return g!==_._v$3&&v(d,_._v$3=g),C!==_._v$4&&v(u,_._v$4=C),_},{_v$3:void 0,_v$4:void 0}),d})()]}})}})}}),null),f(()=>v(c,B.wrapper)),c})()};A(["click"]);const yn="_footer_5kbs9_1",En="_footer__source-code_5kbs9_16",In="_footer__help_5kbs9_20",$e={footer:yn,"footer__source-code":"_footer__source-code_5kbs9_16",footer__sourceCode:En,footer__help:In},Ln=w('<footer><div><a target="_blank">Github</a></div><div></div></footer>'),Sn=()=>(()=>{const e=Ln.cloneNode(!0),n=e.firstChild,t=n.firstChild,o=n.nextSibling;return M(t,"href",ft),h(o,p(kn,{})),f(r=>{const i=$e.footer,s=$e.footer__sourceCode,a=$e.footer__help;return i!==r._v$&&v(e,r._v$=i),s!==r._v$2&&v(n,r._v$2=s),a!==r._v$3&&v(o,r._v$3=a),r},{_v$:void 0,_v$2:void 0,_v$3:void 0}),e})(),Tn="_burger-menu_1rcss_1",Dn="_burger-menu__line_1rcss_6",Nn="_burger-menu__line_active_1rcss_26",we={"burger-menu":"_burger-menu_1rcss_1",burgerMenu:Tn,"burger-menu__line":"_burger-menu__line_1rcss_6",burgerMenu__line:Dn,"burger-menu__line_active":"_burger-menu__line_active_1rcss_26",burgerMenu__line_active:Nn},Rn=w('<div role="button"></div>'),Pn=w("<span></span>"),Wn=e=>{const n=[0,1,2];return(()=>{const t=Rn.cloneNode(!0);return h(t,p(ue,{each:n,children:o=>(()=>{const r=Pn.cloneNode(!0);return f(i=>Y(r,{[we.burgerMenu__line]:!0,[we.burgerMenu__line_active]:e.active},i)),r})()})),f(()=>v(t,we.burgerMenu)),t})()},Mn="_option_1s7nj_1",Hn="_option__chosen_1s7nj_15",Re={option:Mn,option__chosen:Hn},An=w('<li role="button"></li>'),Un=e=>{const[n,t]=R(!1),[o,r]=R();ee(()=>t(e.themeOption.name===e.chosen)),te(()=>{const s=e.themeOption.theme,a=Object.keys(s).reduce((c,l)=>(l!=="--active-color"&&(c[l]=s[l]),c),{});r(a)});const i=()=>{e.handleSelect(e.themeOption.name)};return(()=>{const s=An.cloneNode(!0);return s.$$mousedown=i,h(s,()=>e.themeOption.name),f(a=>{const c=o(),l={[Re.option]:!0,[Re.option__chosen]:n()};return a._v$=ie(s,c,a._v$),a._v$2=Y(s,l,a._v$2),a},{_v$:void 0,_v$2:void 0}),s})()};A(["mousedown"]);const On="_wrapper_nwxzd_1",qn="_menu-icon_nwxzd_9",jn="_menu-icon__active_nwxzd_22",zn="_config-menu_nwxzd_26",Bn="_picker_nwxzd_44",Xn="_appear_nwxzd_1",Yn="_save_nwxzd_55",Fn="_save__input_nwxzd_63",X={wrapper:On,"menu-icon":"_menu-icon_nwxzd_9",menuIcon:qn,"menu-icon__active":"_menu-icon__active_nwxzd_22",menuIcon__active:jn,"config-menu":"_config-menu_nwxzd_26",configMenu:zn,picker:Bn,appear:Xn,save:Yn,save__input:Fn},Kn=w("<ul></ul>"),Vn=w('<div><label for="set-storage-permission"></label><input id="set-storage-permission" type="checkbox"></div>'),Gn=w('<div><div role="button"></div></div>'),{saveSettings:Qn,title:Pe,close:Jn}=Q.THEME_PICKER,Zn=()=>{const[e,n]=R(!1),[t,o]=R(Pe),{theme:r,setCurrentTheme:i,saveToStorage:s,toggleSavePermission:a}=ot(),c=nt,l=Object.keys(c);let d;const u=b=>i(b),_=b=>{a(b.target.checked)},g=b=>{b.composedPath().includes(d)||n(!1)};te(()=>{window.addEventListener("click",g),pe(()=>window.removeEventListener("click",g))});const C=()=>{const b=!e();n(b),o(b?Jn:Pe)};return(()=>{const b=Gn.cloneNode(!0),y=b.firstChild,I=d;return typeof I=="function"?ve(I,b):d=b,y.$$click=C,h(y,p(Wn,{get active(){return e()}})),h(b,p(de,{get children(){return p(V,{get when(){return e()},get children(){return p(_e.div,{get class(){return X.configMenu},initial:{width:0,opacity:0},animate:{opacity:1,width:"120px"},exit:{width:0,opacity:0},transition:{duration:.3},get children(){return[(()=>{const E=Kn.cloneNode(!0);return h(E,p(ue,{each:l,children:T=>p(Un,{get themeOption(){return c[T()]},handleSelect:u,get chosen(){return r()}})})),f(()=>v(E,X.picker)),E})(),(()=>{const E=Vn.cloneNode(!0),T=E.firstChild,W=T.nextSibling;return h(T,Qn),W.addEventListener("change",_),f($=>{const m=X.save,D=X.save__label,L=X.save__input;return m!==$._v$&&v(E,$._v$=m),D!==$._v$2&&v(T,$._v$2=D),L!==$._v$3&&v(W,$._v$3=L),$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),f(()=>W.checked=s()),E})()]}})}})}}),null),f(E=>{const T={[X.wrapper]:!0,[X.wrapper__active]:e()},W=t(),$={[X.menuIcon]:!0,[X.menuIcon__active]:e()};return E._v$4=Y(b,T,E._v$4),W!==E._v$5&&M(y,"title",E._v$5=W),E._v$6=Y(y,$,E._v$6),E},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),b})()};A(["click"]);const eo=async e=>new Promise((n,t)=>{const o=new FileReader;o.addEventListener("load",()=>n(o.result),{once:!0}),o.addEventListener("error",()=>t,{once:!0}),o.readAsDataURL(e)}),to=async e=>new Promise((n,t)=>{const o=new Image;o.addEventListener("load",()=>n(o),{once:!0}),o.addEventListener("error",()=>t,{once:!0}),o.src=e}),no=(e,n)=>new Promise((t,o)=>{e.addEventListener("load",()=>t(),{once:!0}),e.addEventListener("error",()=>o,{once:!0}),e.src=n}),{ERRORS:We}=Q,Me=async(e,n=et)=>{const t=e.files;if(t&&t.length){const o=t[0];if(!/^image\//.test(o.type))throw new Error(We.fileType);if(n&&o.size>n)throw new Error(We.size);const s=await eo(o);return{uploaded:o,uploadDataUrl:s}}},oo=async(e,n)=>{const t=document.createElement("a");t.download=n??"pixelated",t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)},ro=e=>{const{imageNaturalHeight:n,imageNaturalWidth:t,width:o,height:r,left:i,top:s,imageHeight:a,imageWidth:c,ref:l}=e;if(!l)return null;const d=document.createElement("canvas"),u=d.getContext("2d"),_=n/a,g=t/c;return d.width=o*g,d.height=r*_,u.imageSmoothingQuality="high",u.drawImage(l,i*g,s*_,o*g,r*_,0,0,o*g,r*_),d.toDataURL()},io=async(e,n)=>{const t=await to(e),o=document.createElement("canvas"),r=o.getContext("2d"),{naturalHeight:i,naturalWidth:s}=t;o.width=s,o.height=i,r.drawImage(t,0,0,s,i);const a=r.getImageData(0,0,s,i).data;if(n===0)return o.toDataURL();for(let c=0;c<i;c+=n)for(let l=0;l<s;l+=n){const d=(l+c*s)*4,u=new Array(4).fill(0).map((_,g)=>a[d+g]);r.fillStyle=`rgba(${u.join(",")})`,r.fillRect(l,c,n,n)}return o.toDataURL()};function ct(e,n){return n.map(t=>e[t]).join(" ")}const so=(e,n)=>{let t=!1;return(...o)=>{t||(e(...o),t=!0,setTimeout(()=>{t=!1},n))}},He=({widthToHeight:e,clientWidthToHeight:n,defaultWidth:t,maximumHeight:o,percentStep:r=3})=>{let i=t,s=i/e*n;if(!(s>o))return i;const c=t/100;for(;s>o;)i-=c*r,s=i/e*n;return i},ao=(e,n,t=tt,o)=>{const{desktop:r,mobile:i}=t,s={widthToHeight:e,clientWidthToHeight:n,finderStep:o},a={defaultWidth:r.defaultWidth,maximumHeight:r.maximumHeight},c={defaultWidth:i.defaultWidth,maximumHeight:i.maximumHeight},l=He({...s,...a}),d=He({...s,...c});return{"--width":l,"--mobile-width":d}},Ae=(e,n,t="vw",o=tt,r)=>{const i=ao(e,n,o,r),s={};for(const a in i){const c=a;s[c]=`${i[c]}${t}`}return s},co="_wrapper_15rb5_5",lo="_input-wrapper_15rb5_14",_o="_input-wrapper__value_15rb5_20",uo="_input-wrapper__input_15rb5_23",po="_select-wrapper_15rb5_28",vo="_select-wrapper__label_15rb5_34",go="_select-wrapper__select_15rb5_37",ho="_select-wrapper__option_15rb5_54",K={wrapper:co,"input-wrapper":"_input-wrapper_15rb5_14",inputWrapper:lo,"input-wrapper__value":"_input-wrapper__value_15rb5_20",inputWrapper__value:_o,"input-wrapper__input":"_input-wrapper__input_15rb5_23",inputWrapper__input:uo,"select-wrapper":"_select-wrapper_15rb5_28",selectWrapper:po,"select-wrapper__label":"_select-wrapper__label_15rb5_34",selectWrapper__label:vo,"select-wrapper__select":"_select-wrapper__select_15rb5_37",selectWrapper__select:go,"select-wrapper__option":"_select-wrapper__option_15rb5_54",selectWrapper__option:ho},mo=w('<div><div><label for="range-setter"></label><input id="range-setter" type="range"><span></span></div><div><label for="range-option-input"></label><select id="range-option-input"></select></div></div>'),fo=w("<option></option>"),{rangeSetterLabel:$o,rangeOptionLabel:wo,title:bo}=Q.PIXELATION_RANGE,Co=[1,5,10],xo=()=>{const{data:{pixelationConfig:e},setContextData:n}=ne(),t=r=>{const i=r.target,s=Number(i.value),{val:a,step:c}=e,l=a/c*s;n("setPixelation",{step:s,val:l})},o=r=>{const i=r.target,{step:s}=e;n("setPixelation",{step:s,val:Number(i.value)})};return(()=>{const r=mo.cloneNode(!0),i=r.firstChild,s=i.firstChild,a=s.nextSibling,c=a.nextSibling,l=i.nextSibling,d=l.firstChild,u=d.nextSibling;return h(s,bo),a.$$input=o,h(c,()=>`${e.val}${$o}`),h(d,wo),u.addEventListener("change",t),h(u,p(ue,{each:Co,children:_=>(()=>{const g=fo.cloneNode(!0);return h(g,_),f(C=>{const b=K.selectWrapper__option,y=_()===e.step;return b!==C._v$11&&v(g,C._v$11=b),y!==C._v$12&&(g.selected=C._v$12=y),C},{_v$11:void 0,_v$12:void 0}),f(()=>g.value=_()),g})()})),f(_=>{const g=K.wrapper,C=K.inputWrapper,b=K.inputWrapper__input,y=e.step,I=50*e.step,E=e.step,T=K.inputWrapper__value,W=K.selectWrapper,$=K.selectWrapper__label,m=K.selectWrapper__select;return g!==_._v$&&v(r,_._v$=g),C!==_._v$2&&v(i,_._v$2=C),b!==_._v$3&&v(a,_._v$3=b),y!==_._v$4&&M(a,"min",_._v$4=y),I!==_._v$5&&M(a,"max",_._v$5=I),E!==_._v$6&&M(a,"step",_._v$6=E),T!==_._v$7&&v(c,_._v$7=T),W!==_._v$8&&v(l,_._v$8=W),$!==_._v$9&&v(d,_._v$9=$),m!==_._v$10&&v(u,_._v$10=m),_},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),f(()=>a.value=e.val),r})()};A(["input"]);const ko="_container_1mfui_9",yo="_img_1mfui_13",Eo="_appear_1mfui_1",Io="_rounded_1mfui_32",Lo="_hide_1mfui_49",J={container:ko,img:yo,appear:Eo,delete:"_delete_1mfui_21",rounded:Io,hide:Lo},So=w('<div><img><span title="Delete"></span></div>'),lt=e=>{const{clearContextData:n}=ne(),t=()=>e.imageLoaded&&e.imageLoaded();return p(de,{exitBeforeEnter:!0,get children(){return p(V,{get when(){return!!e.src},get children(){return p(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1.3},get children(){const o=So.cloneNode(!0),r=o.firstChild,i=r.nextSibling;r.addEventListener("load",t);const s=e.ref;return typeof s=="function"?ve(s,r):e.ref=r,i.$$click=()=>n(),f(a=>{const c=`${e.width?e.width:"100%"}`,l=J.container,d=e.allowExternal?"anonymous":"",u={[J.img]:!0,[J.rounded]:e.rounded},_=e.src,g={[J.delete]:!0,[J.hide]:!e.deletable,[J.rounded]:e.rounded};return c!==a._v$&&o.style.setProperty("width",a._v$=c),l!==a._v$2&&v(o,a._v$2=l),d!==a._v$3&&M(r,"crossorigin",a._v$3=d),a._v$4=Y(r,u,a._v$4),_!==a._v$5&&M(r,"src",a._v$5=_),a._v$6=Y(i,g,a._v$6),a},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),o}})}})}})};A(["click"]);const To="_message_4m4ra_1",Do="_message__description_4m4ra_6",No="_message__error_4m4ra_10",Ue={message:To,message__description:Do,message__error:No},Oe=w("<span></span>"),Ro=w("<div></div>"),{UPLOAD_PLACEHOLDER:Po}=Q,Wo=e=>{const n=Je({class:""},e);return(()=>{const t=Ro.cloneNode(!0);return h(t,p(V,{get when(){return!n.error},get children(){const o=Oe.cloneNode(!0);return h(o,Po),f(()=>v(o,Ue.message__description)),o}}),null),h(t,p(V,{get when(){return!!n.error},get children(){const o=Oe.cloneNode(!0);return h(o,()=>n.error),f(()=>v(o,Ue.message__error)),o}}),null),f(o=>Y(t,{message:!0,[n.class]:!!n.class},o)),t})()},Mo=w('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"></path></svg>'),Ho=e=>{const n=t=>e.onClick&&e.onClick();return(()=>{const t=Mo.cloneNode(!0);return t.$$click=n,f(()=>M(t,"class",e.class)),t})()};A(["click"]);const Ao="_svg_acd1d_1",Uo="_input_acd1d_8",qe={svg:Ao,input:Uo},Oo=w('<input accept="image" type="file" id="file-input">'),qo=e=>{let n;const t=()=>{e.setError(null),n.click()},o=r=>e.onChange(r);return[p(Ho,{get class(){return qe.svg},onClick:t}),(()=>{const r=Oo.cloneNode(!0);r.addEventListener("change",o);const i=n;return typeof i=="function"?ve(i,r):n=r,f(()=>v(r,qe.input)),r})()]},{clearPicture:jo,pixelate:zo,resetCrop:Bo,reset:Xo,download:Yo,back:Fo}=Q.PICTURE_ACTIONS,Ko={val:.2,unit:"s"},Vo={prepare:[{component:e=>p(se,e),title:jo,eventType:"clearUpload",animationName:"swivel"},{component:e=>p(it,e),title:Bo,eventType:"crop",animationName:"flip"},{component:e=>p(rt,e),title:zo,eventType:"pixelate",animationName:"roll"}],result:[{component:e=>p(at,e),title:Fo,eventType:"back",animationName:"scale"},{component:e=>p(se,e),title:Xo,eventType:"reset",animationName:"swivel"},{component:e=>p(st,e),title:Yo,eventType:"download",animationName:"bounce"}]},Go="_actions_mq6m0_1",Qo="_actions__item_mq6m0_8",Jo="_slideIn_mq6m0_1",Zo="_svg_mq6m0_25",er="_swivel_mq6m0_40",tr="_flip_mq6m0_43",nr="_roll_mq6m0_46",or="_bounce_mq6m0_49",rr="_scale_mq6m0_52",ir="_slideDown_mq6m0_1",be={actions:Go,actions__item:Qo,slideIn:Jo,svg:Zo,swivel:er,flip:tr,roll:nr,bounce:or,scale:rr,slideDown:ir},sr=w("<ul></ul>"),ar=w('<li role="button"></li>'),je=e=>{const{clearContextData:n,setContextData:t,data:{croppedDataUrl:o,pixelatedDataUrl:r,pixelationConfig:i}}=ne(),s=async a=>{if(a)switch(a){case"clearUpload":return n("upload");case"reset":return n();case"back":return n("pixelated");case"crop":return n("crop");case"pixelate":{const c=await io(o(),i.val);t("pixelated",c);return}case"download":return oo(r());default:return}};return(()=>{const a=sr.cloneNode(!0);return h(a,p(Ze,{get each(){return Vo[e.type]},children:(c,l)=>{const{component:d,title:u,eventType:_,animationName:g}=c,{val:C,unit:b}=Ko;return(()=>{const y=ar.cloneNode(!0);return y.$$click=()=>s(_),M(y,"aria-label",u),y.style.setProperty("animation-duration",`${C}${b}`),h(y,p(_t,{component:d,get class(){return ct(be,["svg",g])}})),f(I=>{const E=be.actions__item,T=`${l()*C*.5}${b}`;return E!==I._v$&&v(y,I._v$=E),T!==I._v$2&&y.style.setProperty("animation-delay",I._v$2=T),I},{_v$:void 0,_v$2:void 0}),y})()}})),f(()=>v(a,be.actions)),a})()};A(["click"]);const Ie=e=>e.type.includes("mouse"),cr=e=>e.type.includes("touch"),ze=(e,{mouse:n,touch:t},o,r="add")=>{const i=Ie(e)?n:cr(e)?t:null;if(i){if(r==="add"){document.addEventListener(i,o);return}if(r==="remove"){document.removeEventListener(i,o);return}}},lr=(e=null)=>{const n=e?.width??0,t=e?.height??0,o=e?.naturalHeight??0,r=e?.naturalWidth??0;return{width:n,height:t,bottom:0,left:0,right:0,top:0,imageWidth:n,imageHeight:t,imageNaturalWidth:r,imageNaturalHeight:o,ref:e}},_r=e=>Object.keys(e).reduce((o,r)=>(o[r]=`${e[r]}px`,o),{}),dr=e=>{const n=["L","R"],t=["B","T"],o=e.split(""),r=n.filter(s=>o.includes(s))[0],i=t.filter(s=>o.includes(s))[0];return{inlineType:r,blockType:i}},Be=e=>{if(Ie(e))return{clientX:e.clientX,clientY:e.clientY};const n=e.changedTouches[0];return{clientX:n.clientX,clientY:n.clientY}},ur=(e,n,t)=>{const{left:o,right:r,top:i,bottom:s}=n;return{topY:e.clientY<=i?i:e.clientY>=s-t.bottom?s-t.bottom:e.clientY>=s?s:e.clientY,bottomY:e.clientY>=s?s:e.clientY<=i+t.top?i+t.top:e.clientY,rightX:e.clientX>=r?r:e.clientX<=o+t.left?o+t.left:e.clientX,leftX:e.clientX<=o?o:e.clientX>=r-t.right?r-t.right:e.clientX}},pr=({refClientRect:e,dimensions:n,pointerPositions:t,cornerTypes:o})=>{const r={height:n.height,top:n.top,bottom:n.bottom},{blockType:i}=o;if(!i)return r;const{top:s,bottom:a,height:c}=e,{topY:l,bottomY:d}=t,u=i==="T"?{top:l-s,height:a-n.bottom-l}:{bottom:a-d,height:c-(a-d+n.top)};return{...r,...u}},vr=({refClientRect:e,dimensions:n,pointerPositions:t,cornerTypes:o})=>{const{inlineType:r}=o,i={width:n.width,left:n.left,right:n.right};if(!r)return i;const{width:s,left:a,right:c}=e,{leftX:l,rightX:d}=t,u=o.inlineType==="R"?{right:c-d,width:s-(c-d+n.left)}:{left:l-a,width:s-(l-a+n.right)};return{...i,...u}},gr=({cornerTypes:e,dimensions:n,refClientRect:t,inlineDim:o,blockDim:r})=>{const{height:i,width:s}=t,{blockType:a,inlineType:c}=e,l=i/s;let d,u,_;if(a?(d=r.height,u=r.height/l):(u=o.width,d=o.width*l),a){_=u-n.width;const y={...o};y.width=u;const I=!c||c==="R"?"right":"left",E=I==="right"?"left":"right",T=n[I]-_,W=T<0;return y[I]=W?0:T,y[E]=W?n[E]+T:n[E],{inlineDim:y,blockDim:r}}_=d-n.height;const g={...r,height:d},C=i-d-n.top,b=C<0?0:C;return g.bottom=b,g.top+=C<0?C:0,{inlineDim:o,blockDim:{...g}}},hr=({config:e,refClientRect:n,dimensions:t,eventPosition:o,preserveAspectRatio:r})=>{const i={},{dragConfig:s}=e,a=ur(o,n,t),c=dr(s),l={refClientRect:n,cornerTypes:c,pointerPositions:a,dimensions:t},d=pr(l),u=vr(l);if(r){const _=gr({...l,inlineDim:u,blockDim:d});return{...i,..._.inlineDim,..._.blockDim}}return{...i,...d,...u}},mr=({dimensions:e,eventPosition:n,prevPosition:t})=>{let o={};const r=n.clientX-t.clientX,i=n.clientY-t.clientY,{top:s,bottom:a,left:c,right:l}=e;if(i<0){const d=s+i>=0?s+i:0;o={...o,top:d,bottom:a+s-d}}else{const d=a-i>=0?a-i:0;o={...o,bottom:d,top:s+a-d}}if(r<0){const d=c+r>=0?c+r:0;o={...o,left:d,right:l+c-d}}else{const d=l-r>=0?l-r:0;o={...o,right:d,left:c+l-d}}return o},Xe=(e,n=!1)=>{const{top:t,bottom:o,left:r,right:i,imageHeight:s,imageWidth:a}=e,c={left:r/a,right:(a-i)/a,top:t/s,bottom:(s-o)/s};return{"clip-path":`polygon(${(n?Ct:[Ce,re,[c.left,1],[c.left,c.top],[c.right,c.top],[c.right,c.bottom],[c.left,c.bottom],[c.left,1],ke,xe]).map(_=>_.map(g=>`${g*100}%`).join(" ")).join(",")})`}},fr=(e,n)=>{const{blockSize:t,inlineSize:o}=e,r=[{dim:["width","left","right"],ratio:o/n.imageWidth},{dim:["height","bottom","top"],ratio:t/n.imageHeight}],i={...n,imageHeight:t,imageWidth:o};return r.forEach(({dim:s,ratio:a})=>s.forEach(c=>i[c]=i[c]*a)),i},$r=(e,n)=>n&&Ie(e)?e[`${n}Key`]:!1,wr="_cropper_r15jr_1",br="_mask_r15jr_8",Cr="_move_r15jr_17",xr="_corner_r15jr_28",kr="_top_r15jr_35",yr="_bottom_r15jr_39",Er="_left_r15jr_43",Ir="_right_r15jr_47",Lr="_horizontal_r15jr_78",Sr="_vertical_r15jr_83",le={cropper:wr,mask:br,move:Cr,corner:xr,top:kr,bottom:yr,left:Er,right:Ir,horizontal:Lr,vertical:Sr},Ye=w("<div></div>"),Tr=w("<div><div></div></div>"),Dr=w("<span></span>"),Nr=[...bt.entries()],Rr=e=>{const{moveActive:n,moveEnd:t}=xt,{data:{croppedDataUrl:o}}=ne(),[r,i]=R(!1),[s,a]=R(),[c,l]=R("100%"),[d,u]=R(),[_,g]=R(),[C,b]=R();let y;const I=Je({width:"100%",mask:!0,aspectRatioKey:"shift",showCrop:!0},e),E=()=>i(!0),T=k=>{const x=s(),S=d(),{dragType:N}=S,U=Be(k);let z={};if(N==="corner"){const H=$r(k,I.aspectRatioKey),oe=hr({config:S,refClientRect:y.getBoundingClientRect(),dimensions:x,eventPosition:U,preserveAspectRatio:H});z={...z,...oe}}if(N==="move"){const H=mr({dimensions:x,eventPosition:U,prevPosition:C()});z={...z,...H}}if(x){const H={...x,...z};b(U),a(H),g(Xe(H))}},W=k=>{const x=k&&k[0],S=s();if(!x||!S)return;const N=fr(x,S);a({...N})},$=k=>{const{dragType:x,e:S}=k;b(Be(S)),u(x==="corner"?{dragType:x,dragConfig:k.dragConfig}:{dragType:x,dragConfig:null}),ze(S,n,T)},m=k=>{u(void 0),b(void 0),ze(k,n,T,"remove"),I.selectionListener&&I.selectionListener(s())},D=(k="add")=>{Object.values(t).forEach(x=>k==="add"?document.addEventListener(x,m):document.removeEventListener(x,m))},L=new ResizeObserver(([{borderBoxSize:k}])=>W(k)),P=()=>{const k=s();return k&&_r(k)},j=k=>{const x=k??lr(y);a(x),g(Xe(x,!k))};return te(()=>{D(),I.width&&l(I.width),L.observe(y)}),pe(()=>{D("remove"),L.disconnect()}),ee(()=>r()&&j(I.presetDimensions)),ee(()=>!o()&&r()&&j()),(()=>{const k=Ye.cloneNode(!0);return k.style.setProperty("position","relative"),h(k,p(lt,{get src(){return I.src},ref(x){const S=y;typeof S=="function"?S(x):y=x},imageLoaded:E}),null),h(k,p(V,{get when(){return r()&&I.showCrop},get children(){return[p(V,{get when(){return I.mask},get children(){const x=Ye.cloneNode(!0);return f(S=>{const N=le.mask,U=_();return N!==S._v$&&v(x,S._v$=N),S._v$2=ie(x,U,S._v$2),S},{_v$:void 0,_v$2:void 0}),x}}),(()=>{const x=Tr.cloneNode(!0),S=x.firstChild;return S.$$touchstart=N=>$({e:N,dragType:"move"}),S.$$mousedown=N=>$({e:N,dragType:"move"}),h(x,p(Ze,{each:Nr,children:N=>{const[U,z]=N;return(()=>{const H=Dr.cloneNode(!0);return H.$$touchstart=oe=>$({e:oe,dragType:"corner",dragConfig:U}),H.$$mousedown=oe=>$({e:oe,dragType:"corner",dragConfig:U}),f(()=>v(H,ct(le,z))),H})()}}),null),f(N=>{const U=le.cropper,z=P(),H=le.move;return U!==N._v$3&&v(x,N._v$3=U),N._v$4=ie(x,z,N._v$4),H!==N._v$5&&v(S,N._v$5=H),N},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),x})()]}}),null),f(()=>k.style.setProperty("width",c())),k})()};A(["mousedown","touchstart"]);const Pr="_outer-container_x4udl_6",Wr="_outer-container_drag-active_x4udl_12",Mr="_upload-container_x4udl_15",Hr="_upload-container__svg-placeholder_x4udl_31",Ar="_upload-container__svg_x4udl_31",Ur="_upload-container__message_x4udl_41",Or="_upload-container__input_x4udl_47",qr="_picture-container_x4udl_50",jr="_pixelated-container_x4udl_51",zr="_actions-wrapper_x4udl_63",Br="_pixelation-factor-wrapper_x4udl_70",q={"outer-container":"_outer-container_x4udl_6",outerContainer:Pr,"outer-container_drag-active":"_outer-container_drag-active_x4udl_12",outerContainer_dragActive:Wr,"upload-container":"_upload-container_x4udl_15",uploadContainer:Mr,"upload-container__svg-placeholder":"_upload-container__svg-placeholder_x4udl_31",uploadContainer__svgPlaceholder:Hr,"upload-container__svg":"_upload-container__svg_x4udl_31",uploadContainer__svg:Ar,"upload-container__message":"_upload-container__message_x4udl_41",uploadContainer__message:Ur,"upload-container__input":"_upload-container__input_x4udl_47",uploadContainer__input:Or,"picture-container":"_picture-container_x4udl_50",pictureContainer:qr,"pixelated-container":"_pixelated-container_x4udl_51",pixelatedContainer:jr,"actions-wrapper":"_actions-wrapper_x4udl_63",actionsWrapper:zr,"pixelation-factor-wrapper":"_pixelation-factor-wrapper_x4udl_70",pixelationFactorWrapper:Br},Fe=w("<div><div></div></div>"),Xr=w("<div><div></div><div></div></div>"),Yr=w("<div></div>"),Fr={upload:0,pixelated:0,client:0},Kr=()=>{const[e,n]=R(null),[t,o]=Ve(Fr),[r,i]=R(!1),[s,a]=R(),[c,l]=R(),d=()=>p(xo,{}),{data:{uploadDataUrl:u,pixelatedDataUrl:_},setContextData:g}=ne(),C=$=>$.preventDefault(),b=so($=>o("client",window.innerWidth/window.innerHeight),100);te(()=>{o("client",window.innerWidth/window.innerHeight),["dragover","drop"].forEach($=>window.addEventListener($,C),!1),window.addEventListener("resize",b),pe(()=>{["dragover","drop"].forEach($=>window.removeEventListener($,C,!1)),window.removeEventListener("resize",b)})}),ee(()=>{!u()&&a(void 0)}),ee(()=>{u()&&l(Ae(t.upload,t.client))});const y=$=>{a($),g("crop",ro($)??"");const{width:m,height:D}=$;o("pixelated",m/D)},I=async $=>{const m=new Image;await no(m,$),o("upload",m.naturalWidth/m.naturalHeight)},E=async $=>{try{const m=$.target,D=await Me(m);if(D){const{uploadDataUrl:L}=D;await I(L),g("upload",L)}}catch(m){m instanceof Error&&n(m.message)}},T=$=>{$==="enter"&&i(!0),$==="leave"&&i(!1)},W=async $=>{i(!1);try{if($.dataTransfer){const m=await Me($.dataTransfer);if(m){const{uploadDataUrl:D}=m;await I(D),g("upload",D)}}}catch(m){m instanceof Error&&n(m.message)}};return(()=>{const $=Yr.cloneNode(!0);return h($,p(Qe,{get children(){return[p(Z,{get when(){return!u()},get children(){const m=Fe.cloneNode(!0),D=m.firstChild;return m.addEventListener("drop",L=>W(L)),m.addEventListener("dragleave",()=>T("leave")),m.addEventListener("dragover",()=>T("enter")),h(D,p(qo,{onChange:E,setError:n})),h(m,p(Wo,{get error(){return e()},get class(){return q.uploadContainer__message}}),null),f(L=>{const P=q.uploadContainer,j=q.uploadContainer__svgPlaceholder;return P!==L._v$&&v(m,L._v$=P),j!==L._v$2&&v(D,L._v$2=j),L},{_v$:void 0,_v$2:void 0}),m}}),p(Z,{get when(){return dt(()=>!!u())()&&!_()},get children(){const m=Xr.cloneNode(!0),D=m.firstChild,L=D.nextSibling;return h(D,p(je,{type:"prepare"})),h(L,d),h(m,p(Rr,{get src(){return u()},selectionListener:y,get presetDimensions(){return s()}}),null),f(P=>{const j=c(),k=q.pictureContainer,x=q.actionsWrapper,S=q.pixelationFactorWrapper;return P._v$3=ie(m,j,P._v$3),k!==P._v$4&&v(m,P._v$4=k),x!==P._v$5&&v(D,P._v$5=x),S!==P._v$6&&v(L,P._v$6=S),P},{_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),m}}),p(Z,{get when(){return _()},get children(){const m=Fe.cloneNode(!0),D=m.firstChild;return h(D,p(je,{type:"result"})),h(m,p(lt,{get src(){return _()}}),null),f(L=>{const P=q.pixelatedContainer,j=Ae(t.pixelated,t.client),k=q.actionsWrapper;return P!==L._v$7&&v(m,L._v$7=P),L._v$8=ie(m,j,L._v$8),k!==L._v$9&&v(D,L._v$9=k),L},{_v$7:void 0,_v$8:void 0,_v$9:void 0}),m}})]}})),f(m=>Y($,{[q.outerContainer]:!0,[q.outerContainer_dragActive]:r()},m)),$})()},Vr=w("<header><div></div><div></div></header>"),Gr=w("<main><div><div></div></div></main>"),Qr=()=>{const{initializeTheme:e}=ot();return te(()=>{e()}),[(()=>{const n=Vr.cloneNode(!0),t=n.firstChild,o=t.nextSibling;return h(n,p(Dt,{}),o),h(o,p(Zn,{})),f(r=>{const i=ae.header,s=ae.options;return i!==r._v$&&v(n,r._v$=i),s!==r._v$2&&v(o,r._v$2=s),r},{_v$:void 0,_v$2:void 0}),n})(),(()=>{const n=Gr.cloneNode(!0),t=n.firstChild,o=t.firstChild;return h(o,p(Kr,{})),f(r=>{const i=ae.baseContainer,s={[ae.baseContainer__uploadArea]:!0};return i!==r._v$3&&v(t,r._v$3=i),r._v$4=Y(o,s,r._v$4),r},{_v$3:void 0,_v$4:void 0}),n})(),p(Sn,{})]};ut(()=>p(Ot,{get children(){return p(Qr,{})}}),document.getElementById("root"));
